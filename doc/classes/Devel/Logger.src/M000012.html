
<html>
<head><title>add (Devel::Logger)</title>
<style>
  pre { font-size: 1.3em; }
  .kw { color: #3333FF; font-weight: bold }
  .cmt { color: green; font-style: italic }
  .str { color: #662222; font-style: italic }
  .re  { color: #662222; }
</style>
</head>
<body bgcolor="white">
<pre><span class="cmt"># File /usr/local/lib/ruby/site_ruby/1.7/devel/logger.rb, line 187</span>
  <span class="kw">def</span> add( severity, msg = <span class="kw">nil</span>, progName = <span class="kw">nil</span>, &block )
    severity ||= SEV_UNKNOWN
    <span class="kw">if</span> @logDev.nil? <span class="kw">or</span> severity < @sevThreshold
      <span class="kw">return</span> <span class="kw">true</span>
    <span class="kw">end</span>
    progName ||= @progName

    <span class="kw">if</span> msg.nil?
      <span class="kw">if</span> block_given?
	msg = <span class="kw">yield</span>
      <span class="kw">else</span>
	msg = progName
	progName = @progName
      <span class="kw">end</span>
    <span class="kw">end</span>

    <span class="kw">if</span> msg.is_a?( ::Exception )
      msg = "#{ msg.message } (#{ msg.type })\n" <<
	( msg.backtrace || [] ).join( <span class="str">"\n"</span> )
    <span class="kw">elsif</span> !msg.is_a?( ::String )
      msg = msg.inspect
    <span class="kw">end</span>

    severityLabel = formatSeverity( severity )
    timestamp = formatDatetime( Time.now )
    msg = formatComment( msg )
    message = formatMessage( severityLabel, timestamp, msg, progName )
    @logDev.write( message )
    <span class="kw">true</span>
  <span class="kw">end</span></pre>
</body>
</html>
