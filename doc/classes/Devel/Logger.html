
<html><head>
  <title>Class: Devel::Logger</title>
  <link rel=StyleSheet href="../.././rdoc-style.css" type="text/css" media=screen>
  <script language="JavaScript">
  <!--
  function popCode(url) {
    window.open(url, "Code", 
          "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  //-->
  </script>
</head>
<body bgcolor="white">


<table width="100%" border=0 cellspacing=0>
 <tr class="title-row">
 <td class="big-title-font">
   <sup><font color="aqua">Class</font></sup> Devel::Logger
 </td>
 <td align="right">
   <table cellspacing=0 cellpadding=2>
     <tr valign="top">
      <td class="small-title-font">In:</td>
      <td class="small-title-font">

        <a href="../../files/devel/logger_rb.html" class="aqua">

/home/achilles/nakahiro/cvs_work/Ruby/Application/lib/devel/logger.rb

         </a>


      </td>
     </tr>

     <tr>
      <td class="small-title-font">Parent:</td>
      <td class="small-title-font">

Object

      </td>
     </tr>

   </table>
  </td>
  </tr>
</table>
  <!-- banner header -->





<div class="description"><td>DESCRIPTION

<pre>
  Devel::Logger -- Logging utility.
</pre>
<p>
How to create a logger.

<pre>
  1. Create logger which logs messages to STDERR/STDOUT.
    logger = Devel::Logger.new( STDERR )
    logger = Devel::Logger.new( STDOUT )

  2. Create logger for the file which has the specified name.
    logger = Devel::Logger.new( 'logfile.log' )
</pre>
<p>
<pre>
  3. Create logger for the specified file.
    file = open( 'foo.log', File::WRONLY | File::APPEND )
    # To create new (and to remove old) logfile, add File::CREAT like;
    #   file = open( 'foo.log', File::WRONLY | File::APPEND | File::CREAT )
    logger = Device::Logger.new( file )

  4. Create logger which ages logfile automatically.  Leave 10 ages and each
     file is about 102400 bytes.
    logger = Device::Logger.new( 'foo.log', 10, 102400 )
</pre>
<p>
<pre>
  5. Create logger which ages logfile daily/weekly/monthly automatically.
    logger = Logger.new( 'foo.log', 'daily' )
    logger = Logger.new( 'foo.log', 'weekly' )
    logger = Logger.new( 'foo.log', 'monthly' )
</pre>
<p>
How to log a message.

<p>
<pre>
  1. Message in block.
    logger.fatal { &quot;Argument 'foo' not given.&quot; }

  2. Message as a string.
    logger.error &quot;Argument #{ @foo } mismatch.&quot;
</pre>
<p>
<pre>
  3. With progName.
    logger.info( 'initialize' ) { &quot;Initializing...&quot; }

  4. With severity.
    logger.add( Devel::Logger::SEV_FATAL ) { 'Fatal error!' }
</pre>
<p>
How to close a logger.

<p>
<pre>
  logger.close
</pre>
<p>
Setting severity threshold.

<p>
<pre>
  1. Original interface.
    logger.sevThreshold = Devel::Logger::SEV_WARN

  2. Log4r (somewhat) compatible interface.
    logger.level = Devel::Logger::INFO
</pre>
<p>
<pre>
  DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; CAUTION &lt; FATAL &lt; UNKNOWN
</pre>
<p>
Format.

<p>
<pre>
  Log format:
    SeverityID, [ Date Time mSec #pid] SeverityLabel -- ProgName: message

  Log sample:
    I, [Wed Mar 03 02:34:24 JST 1999 895701 #19074]  INFO -- Main: info.
</pre>
<p>
</div>





<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Methods</td></tr>
</table>
<div class="name-list">
<a href="#M000012">add</a>&nbsp; &nbsp;
<a href="#M000017">caution</a>&nbsp; &nbsp;
<a href="#M000020">close</a>&nbsp; &nbsp;
<a href="#M000013">debug</a>&nbsp; &nbsp;
<a href="#M000006">debug?</a>&nbsp; &nbsp;
<a href="#M000016">error</a>&nbsp; &nbsp;
<a href="#M000009">error?</a>&nbsp; &nbsp;
<a href="#M000018">fatal</a>&nbsp; &nbsp;
<a href="#M000010">fatal?</a>&nbsp; &nbsp;
<a href="#M000014">info</a>&nbsp; &nbsp;
<a href="#M000007">info?</a>&nbsp; &nbsp;
<a href="#M000022">kCode</a>&nbsp; &nbsp;
<a href="#M000021">kCode=</a>&nbsp; &nbsp;
<a href="#M000005">level</a>&nbsp; &nbsp;
<a href="#M000004">level=</a>&nbsp; &nbsp;
<a href="#M000011">new</a>&nbsp; &nbsp;
<a href="#M000019">unknown</a>&nbsp; &nbsp;
<a href="#M000015">warn</a>&nbsp; &nbsp;
<a href="#M000008">warn?</a>&nbsp; &nbsp;

</div>



<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Attributes</td></tr>
</table>
<table cellspacing=5>
     <tr valign="top">
       <td class="attr-name">sevThreshold</td>
       <td align="center" class="attr-rw">&nbsp;[RW]&nbsp;</td>
       <td></td>
     </tr>

</table>



<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Classes and Modules</td></tr>
</table>
Module <a href="Logger/Severity.html" class="link">Devel::Logger::Severity</a><br>
Class <a href="Logger/ShiftingError.html" class="link">Devel::Logger::ShiftingError</a><br>
Class <a href="Logger/Error.html" class="link">Devel::Logger::Error</a><br>



  

<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Included modules</td></tr>
</table>
<div class="name-list">
    <span class="method-name">Logger</span>

</div>




<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Public Class methods</td></tr>
</table>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000011">

<a href="Logger.src/M000011.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000011.html');return 0;">

<b>new</b>( logDev, shiftAge = 0, shiftSize = 1048576 )

</a>

</a></td></tr>
</table>
<div class="description">
SYNOPSIS

<pre>
  Logger.new( name, shiftAge = 7, shiftSize = 1048576 )
</pre>
<p>
ARGS

<pre>
  log String as filename of logging.
              or
              IO as logging device(i.e. STDERR).
  shiftAge    An Integer Num of files you want to keep aged logs.
              'daily'              Daily shifting.
              'weekly'     Weekly shifting (Every monday.)
              'monthly'    Monthly shifting (Every 1th day.)
  shiftSize   Shift size threshold when shiftAge is an integer.
              Otherwise (like 'daily'), shiftSize will be ignored.
</pre>
<p>
DESCRIPTION

<pre>
  Create an instance.
</pre>
<p>

</div>



<table cellpadding=5 width="100%">
<tr><td class="tablesubtitle">Public Instance methods</td></tr>
</table>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000004">

<a href="Logger.src/M000004.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000004.html');return 0;">

<b>level=</b>( newLevel )

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000005">

<a href="Logger.src/M000005.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000005.html');return 0;">

<b>level</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000006">

<a href="Logger.src/M000006.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000006.html');return 0;">

<b>debug?</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000007">

<a href="Logger.src/M000007.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000007.html');return 0;">

<b>info?</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000008">

<a href="Logger.src/M000008.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000008.html');return 0;">

<b>warn?</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000009">

<a href="Logger.src/M000009.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000009.html');return 0;">

<b>error?</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000010">

<a href="Logger.src/M000010.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000010.html');return 0;">

<b>fatal?</b>()

</a>

</a></td></tr>
</table>
<div class="description">
Interface for Log4r compatibility.


</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000012">

<a href="Logger.src/M000012.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000012.html');return 0;">

<b>add</b>( severity, comment = nil, progName = nil, &amp;block ) {|| ...}

</a>

</a></td></tr>
</table>
<div class="description">
SYNOPSIS

<pre>
  Logger#add( severity, comment = nil, progName = nil ) { ... } = nil
</pre>
<p>
ARGS

<pre>
  severity    Severity.  Constants are defined in Devel::Logger namespace.
              SEV_DEBUG, SEV_INFO, SEV_WARN, SEV_ERROR, SEV_CAUTION,
              SEV_FATAL, or SEV_UNKNOWN.
  comment     Message string.  Can be omitted.
  progName    Program name string.  Can be omitted.
              Logged as a comment if no comment and block are given.
  block     Can be omitted.
            Called to get a message string if comment is nil.
</pre>
<p>
RETURN

<pre>
  true if succeed, false if failed.
  When the given severity is not enough severe,
  Log no message, and returns true.
</pre>
<p>
DESCRIPTION

<pre>
  Log a log if the given severity is enough severe.
</pre>
<p>
BUGS

<pre>
  Logfile is not locked.
  Append open does not need to lock file.
  But on the OS which supports multi I/O, records possibly be mixed.
</pre>
<p>

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000013">

<a href="Logger.src/M000013.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000013.html');return 0;">

<b>debug</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">
SYNOPSIS

<pre>
  Logger#debug( progName = nil ) { ... } = nil
  Logger#info( progName = nil ) { ... } = nil
  Logger#warn( progName = nil ) { ... } = nil
  Logger#error( progName = nil ) { ... } = nil
  Logger#caution( progName = nil ) { ... } = nil
  Logger#fatal( progName = nil ) { ... } = nil
  Logger#unknown( progName = nil ) { ... } = nil
</pre>
<p>
ARGS

<pre>
  progName    Program name string.  Can be omitted.
              Logged as a comment if no block are given.
  block     Can be omitted.
            Called to get a message string if comment is nil.
</pre>
<p>
RETURN

<pre>
  See Devel::Logger#add .
</pre>
<p>
DESCRIPTION

<pre>
  Log a log.
</pre>
<p>

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000014">

<a href="Logger.src/M000014.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000014.html');return 0;">

<b>info</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000015">

<a href="Logger.src/M000015.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000015.html');return 0;">

<b>warn</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000016">

<a href="Logger.src/M000016.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000016.html');return 0;">

<b>error</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000017">

<a href="Logger.src/M000017.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000017.html');return 0;">

<b>caution</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000018">

<a href="Logger.src/M000018.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000018.html');return 0;">

<b>fatal</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000019">

<a href="Logger.src/M000019.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000019.html');return 0;">

<b>unknown</b>( progName = nil, &amp;block )

</a>

</a></td></tr>
</table>
<div class="description">

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000020">

<a href="Logger.src/M000020.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000020.html');return 0;">

<b>close</b>()

</a>

</a></td></tr>
</table>
<div class="description">
SYNOPSIS

<pre>
  Logger#close
</pre>
<p>
DESCRIPTION

<pre>
  Close the logging device.
</pre>
<p>

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000021">

<a href="Logger.src/M000021.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000021.html');return 0;">

<b>kCode=</b>( newKCode )

</a>

</a></td></tr>
</table>
<div class="description">
SYNOPSIS

<pre>
  Logger#kCode=
</pre>
<p>
ARGS

<pre>
  newKCode            Kconv::EUC, Kconv::JIS, or Kcode::SJIS.
</pre>
<p>
DESCRIPTION

<pre>
  Set Japanese Kanji characters' encoding scheme of logfile.
  Once kCode is set, Logger tries to convert message's encoding scheme
  when logging new message.
</pre>
<p>

</div>
<table width="100%" cellspacing = 0 cellpadding=5 border=0>
<tr><td class="methodtitle">
<a name="M000022">

<a href="Logger.src/M000022.html" target="Code" class="methodtitle"
 onClick="popCode('Logger.src/M000022.html');return 0;">

<b>kCode</b>()

</a>

</a></td></tr>
</table>
<div class="description">

</div>




  <!-- method descriptions -->

</body>
